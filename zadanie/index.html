<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Memory</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="popup/dist/remodal.css">
    <link rel="stylesheet" href="popup/dist/remodal-default-theme.css">
    <script src="popup/dist/remodal.min.js"></script>
        <script type="text/javascript">
var ostatniObrazek = "";
var current = "";
var ruch = 0;
var pkt = 0;
         // Funkcja losująca obrazki
    var obrazki = ['obrazek_1.png', 'obrazek_2.png', 'obrazek_3.png', 'obrazek_4.png', 'obrazek_5.png', 'obrazek_6.png', 'obrazek_7.png', 'obrazek_8.png', 'obrazek_1.png', 'obrazek_2.png', 'obrazek_3.png', 'obrazek_4.png', 'obrazek_5.png', 'obrazek_6.png', 'obrazek_7.png', 'obrazek_8.png'];
    $(document).ready(function(){
          $('.obrazek').each(function() {


       var los = obrazki[Math.floor(Math.random()* obrazki.length)];
       var id = Math.floor(Math.random()* 100+1);
      img = $(this);
      img.attr("data-obrazek", los);
      img.attr("data-id", id);

      var itemtoRemove = los;
       obrazki.splice($.inArray(itemtoRemove, obrazki),1);


    });

        $('.obrazek').click(function(){
        img = $(this);
        obrazek = img.attr('data-obrazek');
        console.log("obecny: "+obrazek+" ostatni:"+ostatniObrazek);
        dodajRuch();
        img.attr('src', obrazek);
        var id = img.attr('data-id');
        if(ostatniObrazek == ""){

          ostatniObrazek = obrazek;
          current = id;
      }else if(ostatniObrazek == obrazek && current != id){
                dodajPunkty();
              $(this).removeClass( "obrazek" ).addClass( "wygrana" );
              $(".obrazek").each(function(){
                test = $(this);
                if(test.attr('src') == ostatniObrazek){
                  $(this).removeClass( "obrazek" ).addClass( "wygrana" );
                }
            });

              ostatniObrazek = "";
              current = "";


        } else {
          ostatniObrazek = "";
          current = "";
          setTimeout(function(){

         $('.obrazek').attr('src', "back.png");
       }, 450);
        }












      });


          function dodajPunkty(){
              pkt = pkt + 100/ruch;
              var p = pkt.toFixed(2);
                $('#pkt').text(p);

          }

          function dodajRuch(){
            ruch = ruch+1;
          $('#ruchy').text(ruch);

          }



        // document ready \/
      });










        </script>
  </head>
  <body>



      <div class="plansza">
        <!-- /1-->
          <div class="kafelek"><img src="back.png" alt="test" data-obrazek="1" data-id="" class="obrazek"/></div>
          <div class="kafelek"><img src="back.png" alt="test" data-obrazek="1" data-id="" class="obrazek"></div>
          <div class="kafelek"><img src="back.png" alt="test" data-obrazek="1" data-id=""  class="obrazek"></div>
          <div class="kafelek"><img src="back.png" alt="test" data-obrazek="1" data-id="" class="obrazek"></div>
          <!-- /1-->
          <div class="kafelek"><img src="back.png" alt="test" data-obrazek="1" data-id="" class="obrazek"></div>
          <div class="kafelek"><img src="back.png" alt="test" data-obrazek="1" data-id="" class="obrazek"></div>
          <div class="kafelek"><img src="back.png" alt="test" data-obrazek="1" data-id="" class="obrazek"></div>
          <div class="kafelek"><img src="back.png" alt="test" data-obrazek="1" data-id="" class="obrazek"></div>
          <!-- /1-->
          <div class="kafelek"><img src="back.png" alt="test" data-obrazek="1" data-id="" class="obrazek"></div>
          <div class="kafelek"><img src="back.png" alt="test" data-obrazek="1" data-id="" class="obrazek"></div>
          <div class="kafelek"><img src="back.png" alt="test" data-obrazek="1" data-id="" class="obrazek"></div>
          <div class="kafelek"><img src="back.png" alt="test" data-obrazek="1" data-id="" class="obrazek"></div>

          <!-- /1-->
          <div class="kafelek"><img src="back.png" alt="test" data-obrazek="1" data-id="" class="obrazek"></div>
          <div class="kafelek"><img src="back.png" alt="test" data-obrazek="1" data-id="" class="obrazek"></div>
          <div class="kafelek"><img src="back.png" alt="test" data-obrazek="1" data-id="" class="obrazek"></div>
          <div class="kafelek"><img src="back.png" alt="test" data-obrazek="1" data-id="" class="obrazek"></div>

          <div class="pkt">
            <span>Punktów:</span>
            <span id="pkt">0</span>
          </div>
          <div class="ruchy">
              <span>Ilość ruchów:</span>
              <span id="ruchy">0</span>
          </div>

      </div>



  </body>
</html>
